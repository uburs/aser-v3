<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emotion-Enhanced Captions</title>
    <style>
        /* Your existing styles here */
    </style>
</head>
<body>
    <div id="page1" class="container active">
        <div class="video-box">
            <video id="video1" autoplay muted></video>
        </div>
        <div class="caption-box" id="captionBox1">
            <!-- Captions will appear here -->
        </div>
        <div id="quiz1" class="quiz-container">
            <h3>Quiz: What is computer science?</h3>
            <form id="quizForm1">
                <label>
                    <input type="radio" name="q1" value="The study of languages"> The study of languages
                </label><br>
                <label>
                    <input type="radio" name="q1" value="The study of computation, automation, and information"> The study of computation, automation, and information
                </label><br>
                <label>
                    <input type="radio" name="q1" value="The study of biology"> The study of biology
                </label><br>
            </form>
        </div>
        <div class="navigation">
            <button onclick="showNext()">Next</button>
        </div>
    </div>

    <div id="page2" class="container">
        <div class="video-box" style="width: 100%;">
            <video id="video2" autoplay muted></video>
            <div class="caption-overlay" id="captionBox2">
                <!-- Captions will appear here -->
            </div>
        </div>
        <div id="quiz2" class="quiz-container">
            <h3>Quiz: Which area does computer science cover?</h3>
            <form id="quizForm2">
                <label>
                    <input type="radio" name="q2" value="Cooking"> Cooking
                </label><br>
                <label>
                    <input type="radio" name="q2" value="Programming, systems architecture, databases, and software engineering"> Programming, systems architecture, databases, and software engineering
                </label><br>
                <label>
                    <input type="radio" name="q2" value="History"> History
                </label><br>
            </form>
        </div>
        <div class="navigation">
            <button onclick="showPrevious()">Previous</button>
            <button onclick="showNext()">Next</button>
        </div>
    </div>

    <div id="page3" class="container">
        <div class="video-box">
            <video id="video3" autoplay muted></video>
        </div>
        <div class="caption-box" id="captionBox3">
            <!-- Captions will appear here -->
        </div>
        <div id="quiz3" class="quiz-container">
            <h3>Quiz: What are the recent growth areas in computer science?</h3>
            <form id="quizForm3">
                <label>
                    <input type="radio" name="q3" value="Artificial intelligence, machine learning, and data science"> Artificial intelligence, machine learning, and data science
                </label><br>
                <label>
                    <input type="radio" name="q3" value="Painting"> Painting
                </label><br>
                <label>
                    <input type="radio" name="q3" value="Carpentry"> Carpentry
                </label><br>
            </form>
        </div>
        <div class="navigation">
            <button onclick="showPrevious()">Previous</button>
            <button onclick="showNext()">Next</button>
        </div>
    </div>

    <div id="page4" class="container">
        <div class="emotion-detection-overlay" id="captionBox4">
            <!-- Captions will appear here -->
        </div>
        <div id="quiz4" class="quiz-container">
            <h3>Quiz: Why is understanding computer science concepts crucial?</h3>
            <form id="quizForm4">
                <label>
                    <input type="radio" name="q4" value="For developing efficient and innovative technological solutions"> For developing efficient and innovative technological solutions
                </label><br>
                <label>
                    <input type="radio" name="q4" value="For gardening"> For gardening
                </label><br>
                <label>
                    <input type="radio" name="q4" value="For cooking recipes"> For cooking recipes
                </label><br>
            </form>
        </div>
        <div class="navigation">
            <button onclick="showPrevious()">Previous</button>
            <button onclick="submitResponses()">Submit</button>
        </div>
    </div>

    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <script type="text/javascript">
        (function() {
            emailjs.init('YOUR_USER_ID'); // Replace with your EmailJS user ID
        })();

        function showPrevious() {
            const activePage = document.querySelector('.container.active');
            const prevPage = activePage.previousElementSibling;
            if (prevPage && prevPage.classList.contains('container')) {
                activePage.classList.remove('active');
                prevPage.classList.add('active');
            }
        }

        function showNext() {
            const activePage = document.querySelector('.container.active');
            const nextPage = activePage.nextElementSibling;
            if (nextPage && nextPage.classList.contains('container')) {
                activePage.classList.remove('active');
                nextPage.classList.add('active');
            }
        }

        function submitResponses() {
            const quiz1Response = document.querySelector('input[name="q1"]:checked') ? document.querySelector('input[name="q1"]:checked').value : "No response";
            const quiz2Response = document.querySelector('input[name="q2"]:checked') ? document.querySelector('input[name="q2"]:checked').value : "No response";
            const quiz3Response = document.querySelector('input[name="q3"]:checked') ? document.querySelector('input[name="q3"]:checked').value : "No response";
            const quiz4Response = document.querySelector('input[name="q4"]:checked') ? document.querySelector('input[name="q4"]:checked').value : "No response";

            const templateParams = {
                q1: quiz1Response,
                q2: quiz2Response,
                q3: quiz3Response,
                q4: quiz4Response
            };

            emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                .then(function(response) {
                    alert('Your responses have been submitted successfully!');
                }, function(error) {
                    alert('There was an error submitting your responses. Please try again.');
                });
        }

        window.onload = () => {
            const pages = ['page1', 'page2', 'page3', 'page4'];
            const shuffledPages = pages.sort(() => 0.5 - Math.random());

            const container = document.body;
            shuffledPages.forEach((pageId, index) => {
                const page = document.getElementById(pageId);
                page.classList.remove('active');
                container.appendChild(page);
                if (index === 0) {
                    page.classList.add('active');
                }
            });
        };
    </script>
</body>
</html>
